<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta property="og:image" content="http://a10k.github.io/endorfun/endorfun.jpg" />
<meta property="og:image:width" content="1024" />
<meta property="og:image:height" content="1024" />
<meta property="og:url" content="https://apps.facebook.com/endorfun/" />
<meta property="og:title" content="Endorfun" />
<meta property="fb:app_id" content="492182607628074" />
<title>Endorfun</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link href='https://fonts.googleapis.com/css?family=Exo+2' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/normalize.css">
<link rel="stylesheet" href="css/style.css">
<script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
<body>
<script>
var firebaseRef = new Firebase("https://endorfun.firebaseio.com");
var thisGameStat = firebaseRef.push();

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '492182607628074',
      xfbml      : true,
      version    : 'v2.5'
    });

    // ADD ADDITIONAL FACEBOOK CODE HERE
    // Place following code after FB.init call.

	function onLogin(response) {
	  if (response.status == 'connected') {
	    FB.api('/me?fields=first_name', function(data) {
	      var welcomeBlock = document.getElementById('fb-welcome');
	      welcomeBlock.innerHTML = 'Hello, ' + data.first_name + '!';
        thisGameStat.push().set({
                facebook: data,
                date: Date()
              });
	    });
	  }
	}

	FB.getLoginStatus(function(response) {
	  // Check login status on load, and if the user is
	  // already logged in, go directly to the welcome message.
	  if (response.status == 'connected') {
	    onLogin(response);
	  } else {
	    // Otherwise, show Login dialog first.
	    FB.login(function(response) {
	      onLogin(response);
	    }, {scope: 'user_friends, email'});
	  }
	});
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<div class="container">
  <h1>Endorfun</h1>
  <h3>
  	<span id="fb-welcome"></span><br/>
    Solved: <span class="win">0</span><br/>
    Moves: <span class="chances">0</span>
  </h3>
</div>
<div class="footer" style="display: none;">
  <h4><a href="http://facebook.com/aloknookraj" target="blank"><span>Made by Alok Pepakayala</span></a><br/><span class="desc">Roll the cube into the flashing square with the top face matching its color.</span></h4>
</div>
<div id="endorfun" tabindex="0"></div>
<div class="box"></div>
<div class="mobile"></div>
<div class="nofocus"> <div class="hintImage"><img src="endorfun.gif" style="display:block"></div> <div>Click here to play!</div><div style="font-size:12px;font-weight:100;">(Hint: Use arrow keys on desktop!)</div></div>
<div class="virtual">
  <div id="u" onclick="controlCube.moveUp();"></div>
  <div id="d" onclick="controlCube.moveDown();"></div>
  <div id="l" onclick="controlCube.moveLeft();"></div>
  <div id="r" onclick="controlCube.moveRight();"></div>
</div>
<script src='js/jquery.min.js'></script>
<script src='js/tween.js'></script>
<script src='js/three.min.js'></script>
<script src='js/OrbitControls.js'></script>
<script src="js/index.js"></script>
<script src="js/cubeLogic.js"></script>
<script src="js/mobile.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72798762-1', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript">
  $('.nofocus').click(function(){
    $('.nofocus').css('display','none');
  })
  setInterval(function(){
    var playing = document.hasFocus();
    if(playing){
    }else{
      $('.nofocus').css('display','flex');
    }
  },2000)
</script>